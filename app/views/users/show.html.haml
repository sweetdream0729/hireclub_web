= title @user.name

.container.mt-5.mb-5
  .media
    = image_tag(model_image(@user.avatar, 200, 200, true), width: 100, class: "d-flex mr-3 rounded-circle")
    .media-body
      %h1.black
        = @user.name
      - if @user.username.present?
        %h5
          = "@#{@user.username}"

  - if @user == current_user
    - unless @user.onboarded?
      = link_to "Complete Profile", onboarding_index_path, class: "btn btn-primary"

  - if @user.milestones.any? || @user == current_user
    %hr
    %h6.mt-4.mb-4
      Milestones
      - if @user == current_user
        %a.btn.btn-primary.btn-sm{href: new_milestone_path}
          %i.fa.fa-plus
    - @user.milestones.by_newest.each do |milestone|
      .row
        .col-sm-2
          = milestone.start_date.strftime("%B %Y")
        .col-sm-10
          = milestone.title
          - if policy(milestone).edit?
            = link_to edit_milestone_path(milestone), class: "edit_user_milestones ml-1 mr-1 text-muted hover_primary " do
              %i.fa.fa-pencil
          - if policy(milestone).destroy?
            = link_to milestone, method: :delete, data: { confirm: "Remove this milestone?" }, remote: true, class: "delete_user_milestones text-muted hover_danger" do
              %i.fa.fa-trash-o


      / .col-sm-2
      /   April 2012
      / .col-sm-10
      /   CardFlick funded by 500 Startups Batch 4 for $100,000

      / September 2016 - Up All Night funded by 500 Startups Batch 18 for $125,000
      / June 2008 -      Added First Employee for kidBombay
      / July 2009 -      Qik becomes first client for kidBombay
      / March 2010 -     Twitter becomes second client for kidBombay
      / April 2010 -     Adobe becomes third client for kidBombay
      / May 2010 -       Yammer becomes client for kidBombay
      / Decemeber 2016 - Up All Night hits $700k in revenue
      / Feburary 2013 - Joined Samba.tv as Design Director


  - if @user.user_skills.any? || @user == current_user
    %hr
    %h6.mt-4.mb-4
      Skills
      - if @user == current_user
        %a.btn.btn-primary.btn-sm{href: new_user_skill_path}
          %i.fa.fa-plus
  - @user.user_skills.each do |user_skill|
    %h5.user_skill
      = link_to user_skill.skill.name, user_skill.skill
      %small
        = pluralize(user_skill.years, "year") if user_skill.years > 0

        - if policy(user_skill).edit?
          = link_to edit_user_skill_path(user_skill), class: "edit_user_skills ml-1 mr-1 text-muted hover_primary" do
            %i.fa.fa-pencil

        - if policy(user_skill).destroy?
          = link_to user_skill, method: :delete, data: { confirm: "Remove #{user_skill.name} skill?" }, remote: true, class: "delete_user_skills text-muted hover_danger" do
            %i.fa.fa-trash-o

  - if @user.projects.any? || @user == current_user
    %hr
    %h6.mt-4.mb-4
      Projects
      - if @user == current_user
        %a.btn.btn-primary.btn-sm{href: new_user_project_path(current_user)}
          %i.fa.fa-plus

  .row
    - @user.projects.each do |project|
      .col-sm-3.project
        .card
          - if project.link.present?
            = link_to project.link, target: "_blank" do
              %img.card-img-top{:alt => project.name, :src => model_image(project.image, 800, 600, true), width: "100%"}
          - else
            %img.card-img-top{:alt => project.name, :src => model_image(project.image, 800, 600, true), width: "100%"}

          .card-block
            %p.card-text
              = project.name
              - if policy(project).edit?
                = link_to edit_user_project_path(current_user, project), class: "edit_user_projects ml-1 mr-1 text-muted hover_primary " do
                  %i.fa.fa-pencil

              - if policy(project).destroy?
                = link_to user_project_path(current_user, project), method: :delete, data: { confirm: "Remove #{project.name} project?" }, remote: true, class: "delete_user_projects text-muted hover_danger" do
                  %i.fa.fa-trash-o
